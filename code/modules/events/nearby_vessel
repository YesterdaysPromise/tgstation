/datum/round_event/nearby_vessel
	///Used in randomizing announcements.
	var/list/arrival_reason = list("recieving the wrong chart course",\
		"having been tricked by a member of Wizard Federation",\
		"assault executed by syndicate operatives",
		"anomaly in their navigation system"
	)
	var/list/arrival_type = list("blue-spaced",\
		"somehow teleported",\
		"made a bluespace jump",\
		"casually flown",\
		"got thrown",\
		"ended up getting",\
		"entered",\
		"charted",\
		"got blasted",\
		"popped out of a wormhole",\
		"arrived",
	)
	///Used for generic and wreck ships to determine who they belong to; relevant for events.
	var/list/ship_theme = list("nanotrasen",\
		"othercorp",\
		"spinward",\
		"syndicate",\
		"clown",\
		"pirates",\
		"unknown",\
		"golem",
	)
	start_when = 1
	announce_when = 2

///Friendly Ships///
///Civilian
/datum/round_event_control/nearby_vessel/friendly/civillain
	name = "Civilian Friendly Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/civillain
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Temporarily adds fourth bounty of special type to the bounty console + ship is in the orbit."

/datum/round_event_control/nearby_vessel/friendly/civillain/announce(fake)
	var/list/civilship_types = list("Cruise-class ship of lost Spinward Sector vacationers",\
		"Somebody's uncle's grill party vessel",\
		"An ordinary civillain transporter",\
		"One of our bigger initial-boarding arrival shuttles",\
		"Habitat-class ship with Nanotrasen's identification codes",\
		"Space hotel with engines mounted on",
	)
	var/ship = pick(civilship_types)
	var/arrived = pick(arrival_type)
	priority_announce("[ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

/datum/round_event/nearby_vessel/friendly/civillain/setup()
	end_when = rand(600, 1200)


///Rich/Cargo
/datum/round_event_control/nearby_vessel/friendly/rich
	name = "Rich Friendly Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/rich
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Temporarily speeds up the supply shuttle + ship is in the orbit."

/datum/round_event/nearby_vessel/friendly/rich/setup()
	end_when = rand(600, 1200)

/datum/round_event_control/nearby_vessel/friendly/rich/announce(fake)
	var/list/richship_types = list("a star-charting Nanotrasen's Accounting Division's vessel",\
		"mall-class ship with few dozen trader signatures and Nanotrasen's trading permit",\
		"supplies carrying cargo ship",\
		"big, semi-autonomous ship housing several compartments meant for calculation of stock market",\
		"some posh prick's mansion-ship",\
		"the ship carrying all of your wages for this shift and some supplies",\
		"great and renowned personal quaters ship of one of our richer affiliates",\
		"Nanotrasen's Economics Division's newest mobile supplies deployement centre",
	)
	var/ship = pick(richship_types)
	var/arrived = pick(arrival_type)
	priority_announce("[ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

/datum/round_event_control/nearby_vessel/friendly/rich/start()
	. = ..()
	SSshuttle.supply.callTime *= 0.75

/datum/round_event_control/nearby_vessel/friendly/rich/end()
	. = ..()
	SSshuttle.supply.callTime /= 0.75


///Armed/Secure
/datum/round_event_control/nearby_vessel/friendly/armed
	name = "Armed Friendly Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/armed
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Ship enters the orbit. Most unique events of friendly types, including dicount ERT if station is fucked."

/datum/round_event/nearby_vessel/friendly/armed/setup()
	end_when = rand(600, 1200)

/datum/round_event_control/nearby_vessel/friendly/armed/announce(fake)
	var/list/armedshship_types = list("Nanotrasen's Corporate Warfare Division's freighter",\
		"lower class Nanotrasen's Security Division's vessel coming back from an incident with revolutionaries at SS29",\
		"a massive and armed prison transporter",\
		"an fragment of a gigantic space prison, broken out, and retrofitted by space russians into a spaceship, apparently,",\
		"battlecruiser class ship with Nanotrasen's identification codes",\
		"Nanotrasen's Security Division's academy vessel",
	)
	var/ship = pick(armedship_types)
	var/arrived = pick(arrival_type)
	var/arrived = pick(arrival_reason)
	priority_announce("Due to [reason], [ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")




///Science
/datum/round_event_control/nearby_vessel/friendly/science
	name = "Scientific Friendly Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/science
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Temporarily increases the prices of vending machines."

/datum/round_event/nearby_vessel/friendly/science/setup()
	end_when = rand(600, 1200)

/datum/round_event_control/nearby_vessel/friendly/science/announce(fake)
	var/list/researchshship_types = list("anthropology research team",\
		"spaceship manned by a bunch of egg-heads",\
		"strange ship with a single, seemingly friendly alien scientist, almost a city's worth of archeology team, and massively oversized scanner beam",\
		"ship of some nerds who claim your station might be unusually unlucky",\
		"Nanostrasen's Futures and Innovation Division vessel",\
		"star-system charting explorator-class vessel equipped with full scientific staff",\
		"transport ship holding currently dormant xenomorph eggs retrieved straight from the war-front",\
		"a vessel of bunch of bomb engineers claiming to have ties with now long defunct country of Cuba back on Terra"
	)
	var/ship = pick(researchship_types)
	var/arrived = pick(arrival_type)
	var/arrived = pick(arrival_reason)
	priority_announce("Due to [reason], [ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

/datum/round_event/nearby_vessel/friendly/science

///Engineering
/datum/round_event_control/nearby_vessel/friendly/engi
	name = "Engineering Friendly Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/engi
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Temporarily increases the prices of vending machines."

/datum/round_event/nearby_vessel/friendly/engi/setup()
	end_when = rand(600, 1200)

/datum/round_event_control/nearby_vessel/friendly/engi/announce(fake)
	var/list/researchshship_types = list("Nanotrasen's Heavy Industry vessel full of our trusted technicians",\
		"Nakamura Engineering vessel on contract to build a space station three systems away",\
		"Goreckimil Architecture Team on their way for next terrestial city project",\
		"Some friendly Spinward Coalition engineers",\
		"The team which built your space station",
	)
	var/ship = pick(researchship_types)
	var/arrived = pick(arrival_type)
	var/arrived = pick(arrival_reason)
	priority_announce("Due to [reason], [ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

/datum/round_event/nearby_vessel/friendly/engi/start()


///////////////

/datum/round_event_control/eventname
	name = "name"
	typepath = /datum/round_event/eventname
	weight = 10
	max_occurrences = 1

/datum/round_event_control/eventname/can_spawn_event()
	. = ..()
	if (!.)
		return FALSE
	var/datum/round_event/nearby_vessel/friendly/out_there = locate(/datum/round_event/nearby_vessel/friendly) in SSevents.running
	return !!out_there



if(SEC_LEVEL_RED)


///////////////
///Neutral Ships///

///Generic
/datum/round_event_control/nearby_vessel/neutral/generic
	name = "Generic Neutral Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/official
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Ship enters the orbit. Makes the generic events requiring a ship more likely, but does nothing."

/datum/round_event/nearby_vessel/neutral/generic/setup()
	end_when = rand(600, 1200)
	var/generic_theme = pick(ship_theme)

/datum/round_event_control/nearby_vessel/neutral/generic/announce(fake)
	if(generic_theme == nanotrasen)
		var/list/genericship_types = list("Nanotrasen's Hygiene Division vessel of little significance",\
			"a shipment of interns going towards Centcom",\
			"vessel of Nanotrasen's Intelligence Devision here to check if you have any",\
			"a messanger vessel carrying prioriety data for Nanostrasen's corporate executive",\
			"shipment for one of our subsidiary corps",
		)
	if(generic_theme == othercorp)
		var/list/genericship_types = list("a medicine shipment vessel from DeForest Medical Corporation",\
			"Apadyne Technologies vessel here to test their armours against local fauna",\
			"Dreamland Robotics vessel with unknown agenda",\
			"a ship from Sophronia Broadcasting looking for some inspiration for their new show",
		)
	if(generic_theme == spinward)
		var/list/genericship_types = list("a vessel carrying a team of miners from Spinward Sector",\
			"a ship of some drunk russian hunters who heard there were monsters here",\
			"cargo shipment headed and reserved for Novoyamoskva, capital of the Spinward Sector",\
			"Spinward Stellar Coalition tax ship",
		)
	if(generic_theme == syndicate)
		var/list/genericship_types = list("Interdyne Pharmaceutics medicine carrying cargo vessel",\
			"a seemingly passive, semi-camouflaged vessel our intel suspects to belong to MI13",\
			"cargo shipment headed and reserved for Novoyamoskva, capital of Spinward Sector",\
			"Spinward Stellar Coalition tax ship",
		)
	if(generic_theme == nanotrasen)
	var/ship = pick(researchship_types)
	var/arrived = pick(arrival_type)
	var/arrived = pick(arrival_reason)
	priority_announce("Due to [reason], [ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

/datum/round_event/nearby_vessel/neutral/generic/start()

///Wreckage
/datum/round_event_control/nearby_vessel/neutral/wreck
	name = "Wreckage Neutral Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/official
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	var/wreckage_theme = pick(ship_theme)
	description = "Ship enters the orbit. Throws trash onto the station."

/datum/round_event/nearby_vessel/friendly/engi/setup()
	end_when = rand(600, 1200)

/datum/round_event_control/nearby_vessel/neutral/wreck/announce(fake)
	var/list/researchshship_types = list("Nanotrasen's Repairs and Construction vessel full of our trusted technicians",\
		"Nakamura Engineering vessel on contract to build a space station three systems away",\
		"Goreckimil Architecture Team ",\
		"strange ship with a single alien scientist, an archeology team, and massively oversized scanner beam",\
		"ship of some nerds who claim your station might be unusually unlucky",\
		"star-system charting explorator-class vessel equipped with full scientific staff",\
		"transport ship holding currently dormant xenomorph's egg retrieved straight from the war-front",
	)
	var/ship = pick(researchship_types)
	var/arrived = pick(arrival_type)
	var/arrived = pick(arrival_reason)
	priority_announce("Due to [reason], [ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

/datum/round_event/nearby_vessel/friendly/engi/start()


///Moth


///Lizard


///Ethereal












///////////////
///Enemy Ships///

///Activists
/datum/round_event_control/nearby_vessel/enemy/activists
	name = "Activists Enemy Vessel Arrival"
	typepath = /datum/round_event/nearby_vessel/friendly/official
	max_occurrences = 2
	min_players = 5
	category = EVENT_CATEGORY_FRIENDLY
	description = "Periodically makes announcements which dampen the mood and might cause brain damage to the crew."

/datum/round_event/nearby_vessel/friendly/engi/setup()
	end_when = rand(600, 1200)

/datum/round_event_control/nearby_vessel/friendly/engi/announce(fake)
	var/list/researchshship_types = list("a ship of some tinfoil-hatted idiots who claim they've been abducted by some grey-skinned hyper-advanced aliens",\
		"a syndicate propaganda vessel hacking into our announcement system",\
		"Animal Rights Consortium sponsored team of activists",\
		"Tiger Cooperative aligned sermon-broadcast vessel",\
		"Sophronia Broadcasting vessel seemingly hacked and locked onto 'Conspiracies and Mysteries' channel",\
		"Semi-autonomous vessel manned by Sentient Engines Liberation Front members broadcasting malfunctioning AI data",
	)
	var/ship = pick(researchship_types)
	var/arrived = pick(arrival_type)
	var/arrived = pick(arrival_reason)
	priority_announce("Due to [reason], [ship] seems to have [arrived] into [station_name()]'s system.", "Automated Arrival Announcer")

///Armed



///Xenomorphs


///Pirates


///Cursed






	var/list/gps_locators = list()
	for(var/datum/component/gps/G in GLOB.GPS_list) //nulls on the list somehow
		if(G.tracking)
			gps_locators[G.gpstag] = G

	var/list/options = gps_locators
	options += GLOB.teleportlocs
